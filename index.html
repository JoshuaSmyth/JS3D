<html>
    <body>
        <canvas id="canvas" width="320" height="200" style="scale: 2; background-color: cadetblue;"></canvas>
    </body>

    <style>
        canvas
        {
            image-rendering: -moz-crisp-edges;
            image-rendering: -webkit-crisp-edges;
            image-rendering: pixelated;
            image-rendering: crisp-edges;

            transform-origin: 0 0;
            transform: scale(3);

            border: 1px solid #000000;

            z-index: 1;
        }
    </style>

    <script type="application/javascript">

        var canvas = document.getElementById("canvas");
        var canvas_context = canvas.getContext("2d");
        var canvas_buffer = canvas_context.getImageData(0, 0, canvas.width, canvas.height);
        var canvas_pitch = canvas_buffer.width * 4;

        var PutPixel = function(x, y, color) 
        {
            x = canvas.width/2 + (x | 0);
            y = canvas.height/2 - (y | 0) - 1;

            if (x < 0 || x >= canvas.width || y < 0 || y >= canvas.height) 
            {
                return;
            }

            var offset = 4*x + canvas_pitch*y;
            canvas_buffer.data[offset++] = color[0];
            canvas_buffer.data[offset++] = color[1];
            canvas_buffer.data[offset++] = color[2];
            canvas_buffer.data[offset++] = 255;
        }

        var UpdateCanvas = function() 
        {
            canvas_context.putImageData(canvas_buffer, 0, 0);
        }


        var x = 10;
        var y = 5;
        function update()
        {
            window.requestAnimationFrame(update); 
            PutPixel(x, y, [x, 0, 0] );
            
            // TODO Main Loop Here
            
            UpdateCanvas();
        };

        function init()
        {
            window.requestAnimationFrame(update);
        }

        init();
    </script>
</html>
